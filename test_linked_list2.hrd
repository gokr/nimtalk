#!/usr/bin/env harding
# Test linked list behavior - debug version

Node := Object derive.

Node>>initialize: v [
  value := v.
  nextNode := nil
]

Node>>value [ ^ value ]
Node>>next [ ^ nextNode ]
Node>>next: n [ nextNode := n ]

# Create list: 1 -> 2 -> 3
node1 := Node new.
node1 initialize: 1.

node2 := Node new.
node2 initialize: 2.

# Test basic values before linking
val1 := node1 value.
val2 := node2 value.

# Test if nil check works
testNil := node1 next.
nextIsNil := testNil notNil.

# Link them
node1 next: node2.

# Test if link worked
linkedValue := node1 next.
linkedValIsNil := linkedValue notNil.

# Try to get value through link
gotValue := 0.
linkedValue notNil ifTrue: [
  gotValue := linkedValue value
].

# Sum what we have
result := val1 + val2.
result
