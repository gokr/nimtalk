{
  "name": "Nemo",
  "scopeName": "source.nemo",
  "fileTypes": ["nt"],
  "patterns": [
    {
      "include": "#primitives"
    },
    {
      "include": "#literals"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#method-definition"
    },
    {
      "include": "#block"
    },
    {
      "include": "#collections"
    },
    {
      "include": "#expression"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.nemo",
          "match": "#(?![a-zA-Z_\"\\(\\{])[^\\n]*"
        }
      ]
    },
    "literals": {
      "patterns": [
        {
          "name": "string.quoted.double.nemo",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.nemo",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "entity.name.tag.symbol.nemo",
          "match": "#[a-zA-Z_][a-zA-Z0-9_]*(:[a-zA-Z0-9_]+)*"
        },
        {
          "name": "entity.name.tag.symbol.quoted.nemo",
          "begin": "#\"",
          "end": "\""
        },
        {
          "name": "constant.numeric.nemo",
          "match": "(?<![\\w\\d])(-?\\d+\\.?\\d*([eE][+-]?\\d+)?|\\d*[eE][+-]?\\d+)"
        },
        {
          "name": "constant.language.nemo",
          "match": "\\b(self|super|nil|true|false)\\b"
        }
      ]
    },
    "method-definition": {
      "patterns": [
        {
          "name": "keyword.operator.method-definition.nemo",
          "match": ">>"
        }
      ]
    },
    "block": {
      "patterns": [
        {
          "name": "meta.block.nemo",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.block.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.block.end.nemo" }
          },
          "patterns": [
            {
              "include": "#block-parameters"
            },
            {
              "include": "#block-temps"
            },
            {
              "include": "$self"
            }
          ]
        }
      ]
    },
    "block-parameters": {
      "patterns": [
        {
          "name": "meta.block.parameters.nemo",
          "begin": "(\\[)\\s*(:)",
          "end": "(\\|)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.block.begin.nemo" },
            "2": { "name": "punctuation.definition.parameter.nemo" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.separator.parameters.nemo" }
          },
          "patterns": [
            {
              "name": "variable.parameter.nemo",
              "match": ":[a-zA-Z_][a-zA-Z0-9_]*"
            }
          ]
        },
        {
          "name": "variable.parameter.nemo",
          "match": "(?<=\\[|:)\\s*:[a-zA-Z_][a-zA-Z0-9_]*"
        }
      ]
    },
    "block-temps": {
      "patterns": [
        {
          "name": "meta.block.temporaries.nemo",
          "begin": "(\\|)(?![^\\|]*:)",
          "end": "(\\|)",
          "beginCaptures": {
            "0": { "name": "punctuation.separator.temporaries.nemo" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.separator.temporaries.nemo" }
          },
          "patterns": [
            {
              "name": "variable.other.temporary.nemo",
              "match": "[a-zA-Z_][a-zA-Z0-9_]*"
            }
          ]
        }
      ]
    },
    "collections": {
      "patterns": [
        {
          "name": "meta.array.literal.nemo",
          "begin": "#\\(",
          "end": "\\)",
          "beginCaptures": {
            "0": { "name": "keyword.control.array.begin.nemo punctuation.definition.array.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "keyword.control.array.end.nemo punctuation.definition.array.end.nemo" }
          },
          "patterns": [
            {
              "include": "$self"
            }
          ]
        },
        {
          "name": "meta.table.literal.nemo",
          "begin": "#\\{",
          "end": "\\}",
          "beginCaptures": {
            "0": { "name": "keyword.control.table.begin.nemo punctuation.definition.table.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "keyword.control.table.end.nemo punctuation.definition.table.end.nemo" }
          },
          "patterns": [
            {
              "include": "#arrow"
            },
            {
              "include": "$self"
            }
          ]
        },
        {
          "name": "meta.object.literal.nemo",
          "begin": "\\{\\|",
          "end": "\\|\\}",
          "beginCaptures": {
            "0": { "name": "keyword.control.object.begin.nemo punctuation.definition.object.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "keyword.control.object.end.nemo punctuation.definition.object.end.nemo" }
          },
          "patterns": [
            {
              "include": "$self"
            }
          ]
        }
      ]
    },
    "expression": {
      "patterns": [
        {
          "include": "#parenthesized"
        },
        {
          "include": "#keywords"
        },
        {
          "include": "#operators"
        },
        {
          "include": "#cascade"
        },
        {
          "include": "#identifier"
        }
      ]
    },
    "parenthesized": {
      "patterns": [
        {
          "name": "meta.parens.nemo",
          "begin": "\\(",
          "end": "\\)",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.parentheses.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.parentheses.end.nemo" }
          },
          "patterns": [
            {
              "include": "$self"
            }
          ]
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.nemo",
          "match": "(?<=[a-zA-Z_][a-zA-Z0-9_]*)(:)(?=[a-zA-Z0-9_]+:?)",
          "captures": {
            "1": { "name": "punctuation.definition.keyword.nemo" }
          }
        },
        {
          "name": "keyword.control.nemo",
          "match": "(?<![a-zA-Z0-9])([a-zA-Z_][a-zA-Z0-9_]*)(:)(?![a-zA-Z0-9_:])",
          "captures": {
            "1": { "name": "entity.name.function.nemo" },
            "2": { "name": "punctuation.definition.keyword.nemo" }
          }
        },
        {
          "name": "keyword.control.multi-part.nemo",
          "match": "(?<![a-zA-Z0-9])([a-zA-Z_][a-zA-Z0-9_]*:[a-zA-Z0-9_]+:?)+(?![a-zA-Z0-9_:])"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.assignment.nemo",
          "match": ":="
        },
        {
          "name": "keyword.operator.return.nemo",
          "match": "\\^"
        },
        {
          "name": "keyword.operator.nemo",
          "match": "\\+|-|\\*|/|//|\\\\|<>|<=|>=|=|==|===|~=|<|>|,|%|&|\\|"
        }
      ]
    },
    "arrow": {
      "patterns": [
        {
          "name": "keyword.operator.arrow.nemo",
          "match": "->"
        }
      ]
    },
    "cascade": {
      "patterns": [
        {
          "name": "punctuation.separator.cascade.nemo",
          "match": ";"
        }
      ]
    },
    "identifier": {
      "patterns": [
        {
          "name": "constant.other.class.nemo",
          "match": "\\b[A-Z][a-zA-Z0-9_]*\\b"
        },
        {
          "name": "variable.other.nemo",
          "match": "\\b[a-z_][a-zA-Z0-9_]*\\b"
        }
      ]
    },
    "primitives": {
      "patterns": [
        {
          "name": "support.function.primitive.nemo",
          "begin": "<primitive>",
          "end": "</primitive>",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.primitive.begin.nemo" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.primitive.end.nemo" }
          },
          "patterns": [
            {
              "name": "source.embedded.nim",
              "contentName": "source.nim",
              "match": "."
            }
          ]
        }
      ]
    }
  }
}
